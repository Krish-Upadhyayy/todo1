<!DOCTYPE html>
<html>
<head>
    <title></title>

    <style>
        body {
            padding: 20px;
        }

        table {
            width: 100%;
            border: 1px solid black;
            border-collapse: collapse;
            margin-top: 10px;
        }

        th, td {
            border: 1px solid black;
            padding: 6px;
            text-align: center;
        }

        .done {
            background-color: green;
        }

        .notdone {
            background-color: red;
        }

        button {
            padding: 4px 8px;
            margin: 4px;
        }
    </style>
</head>

<body>

<h2>List</h2>

<button onclick="showAll()">All</button>
<button onclick="showDone()">Completed</button>
<button onclick="showNotDone()">Uncompleted</button>

<table>
    <tr>
        <th>ID</th>
        <th>Task</th>
        <th>Status</th>
        <th>Button</th>
    </tr>
    <tbody id="tableBody">
    </tbody>
</table>

<script>
    var todos = [];

    fetch("https://jsonplaceholder.typicode.com/todos")
    
        .then(function(res){
            return res.json();
        })
        .then(function(data){
            todos = data.slice(0, 30); 
            showTodos(todos);
        });

    function showTodos(list) {
        var body = document.getElementById("tableBody");
        body.innerHTML = "";

        for (var i = 0; i < list.length; i++) {

            var row = document.createElement("tr");

            if (list[i].completed == true) {
                row.className = "done";
            } else {
                row.className = "notdone";
            }

            row.innerHTML =
                "<td>" + list[i].id + "</td>" +
                "<td>" + list[i].title + "</td>" +
                "<td>" + (list[i].completed ? "Done" : "Not Done") + "</td>" +
                "<td><button onclick='changeStatus(" + list[i].id + ")'>Change</button></td>";

            body.appendChild(row);
        }
    }

    function changeStatus(id) {
        for (var i = 0; i < todos.length; i++) {
            if (todos[i].id == id) {
                todos[i].completed = !todos[i].completed;
            }
        }
        showTodos(todos);
    }


    function showDone() {
        var doneList = [];
        for (var i = 0; i < todos.length; i++) {
            if (todos[i].completed == true) {
                doneList.push(todos[i]);
            }
        }
        showTodos(doneList);
    }

    function showNotDone() {
        var notDoneList = [];
        for (var i = 0; i < todos.length; i++) {
            if (todos[i].completed == false) {
                notDoneList.push(todos[i]);
            }
        }
        showTodos(notDoneList);
    }

    function showAll() {
        showTodos(todos);
    }
</script>

</body>
</html>
